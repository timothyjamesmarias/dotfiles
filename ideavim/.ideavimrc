
" ============================================================================
" Keymap Organization (ported from Neovim)
" ============================================================================
" <leader>w/q/Q     - Basic file operations (save, close, quit)
" <leader>h/v       - Window splits
" <leader>e*        - Edit/open files
" <leader>s*        - Search operations
" <leader>f*        - Find (file finding, grep, git, etc.)
" <leader>t*        - Tags (ctags navigation)
" <leader>b*        - Buffer operations (navigation, switching)
" <leader>l*        - LSP operations (definitions, references, diagnostics, etc.)
" <leader>p*        - Project/Framework commands
" <leader>g*        - Git operations
" <leader>x*        - Quickfix/Location list operations
" <leader><leader>  - Quick launchers (instant fuzzy access)
" <C-n/p>           - Buffer/Tab navigation (next/previous)
" n/N               - Search navigation (centered)
" ;                 - Command mode
" ============================================================================

let mapleader = " "

" ============================================================================
" Plugin Configuration
" ============================================================================
" Which-Key: Displays available keybindings in popup
" Install from: Settings → Plugins → Marketplace → "Which-Key"
set which-key
set notimeout
let g:WhichKey_ShowVimActions = "true"
let g:WhichKey_DefaultDelay = 500

" Which-Key prefix descriptions
let g:WhichKeyDesc_leader = "<leader> Leader key"

" File operations
let g:WhichKeyDesc_file = "<leader>f +file/find"
let g:WhichKeyDesc_file_search = "<leader>fs Find files"
let g:WhichKeyDesc_file_recent = "<leader>fr Recent files (project)"
let g:WhichKeyDesc_file_recent_global = "<leader>fR Recent files (all)"
let g:WhichKeyDesc_file_git_commits = "<leader>fg Git commits"
let g:WhichKeyDesc_file_git_modified = "<leader>fm Git modified"
let g:WhichKeyDesc_file_grep = "<leader>fw Live grep"
let g:WhichKeyDesc_file_grep_dir = "<leader>fd Grep in current dir"
let g:WhichKeyDesc_file_grep_prompt = "<leader>fD Grep in directory (prompt)"
let g:WhichKeyDesc_file_keymaps = "<leader>fk Find keymaps"
let g:WhichKeyDesc_file_buffers = "<leader>fb Find buffers"
let g:WhichKeyDesc_file_help = "<leader>fh Help tags"
let g:WhichKeyDesc_file_browse = "<leader>fn File browser (current)"
let g:WhichKeyDesc_file_project = "<leader>fp File browser (project)"
let g:WhichKeyDesc_file_open = "<leader>fo Open in Finder"
let g:WhichKeyDesc_file_open_default = "<leader>fO Open with default app"
let g:WhichKeyDesc_file_yank_rel = "<leader>fy Copy relative path"
let g:WhichKeyDesc_file_yank_abs = "<leader>fY Copy absolute path"
let g:WhichKeyDesc_file_copy_dir_rel = "<leader>fc Copy relative dir"
let g:WhichKeyDesc_file_copy_dir_abs = "<leader>fC Copy absolute dir"

" Edit operations
let g:WhichKeyDesc_edit = "<leader>e +edit"
let g:WhichKeyDesc_edit_file = "<leader>ee Edit file"
let g:WhichKeyDesc_edit_buffer = "<leader>eb Edit buffer"

" Search operations
let g:WhichKeyDesc_search = "<leader>s +search"
let g:WhichKeyDesc_search_file = "<leader>sf Search in file"
let g:WhichKeyDesc_search_replace = "<leader>sr Search and replace"
let g:WhichKeyDesc_search_word = "<leader>sw Replace word under cursor"
let g:WhichKeyDesc_search_usages = "<leader>sl Grep string under cursor"
let g:WhichKeyDesc_search_spell = "<leader>sp Spell suggestions"
let g:WhichKeyDesc_search_scratch = "<leader>sn New scratch file"
let g:WhichKeyDesc_search_scratch_browse = "<leader>sb Browse scratch files"
let g:WhichKeyDesc_search_scratch_console = "<leader>sc New console scratch"

" LSP operations
let g:WhichKeyDesc_lsp = "<leader>l +lsp"
let g:WhichKeyDesc_lsp_definition = "<leader>ld Go to definition"
let g:WhichKeyDesc_lsp_declaration = "<leader>lD Go to declaration"
let g:WhichKeyDesc_lsp_implementation = "<leader>li Go to implementation"
let g:WhichKeyDesc_lsp_type = "<leader>lt Go to type definition"
let g:WhichKeyDesc_lsp_references = "<leader>lr Find references"
let g:WhichKeyDesc_lsp_hover = "<leader>lh Hover documentation"
let g:WhichKeyDesc_lsp_signature = "<leader>ls Signature help"
let g:WhichKeyDesc_lsp_action = "<leader>la Code action"
let g:WhichKeyDesc_lsp_rename = "<leader>ln Rename symbol"
let g:WhichKeyDesc_lsp_error = "<leader>le Show diagnostic"
let g:WhichKeyDesc_lsp_diagnostics = "<leader>lq List diagnostics"
let g:WhichKeyDesc_lsp_symbols = "<leader>lo Document symbols"
let g:WhichKeyDesc_lsp_workspace_symbols = "<leader>lO Workspace symbols"
let g:WhichKeyDesc_lsp_restart = "<leader>lR Restart LSP"
let g:WhichKeyDesc_lsp_info = "<leader>lI LSP info"

" Buffer operations
let g:WhichKeyDesc_buffer = "<leader>b +buffer"
let g:WhichKeyDesc_buffer_list = "<leader>ls List buffers"
let g:WhichKeyDesc_buffer_1 = "<leader>b1 Go to buffer 1"
let g:WhichKeyDesc_buffer_2 = "<leader>b2 Go to buffer 2"
let g:WhichKeyDesc_buffer_3 = "<leader>b3 Go to buffer 3"
let g:WhichKeyDesc_buffer_4 = "<leader>b4 Go to buffer 4"
let g:WhichKeyDesc_buffer_5 = "<leader>b5 Go to buffer 5"
let g:WhichKeyDesc_buffer_6 = "<leader>b6 Go to buffer 6"
let g:WhichKeyDesc_buffer_7 = "<leader>b7 Go to buffer 7"
let g:WhichKeyDesc_buffer_8 = "<leader>b8 Go to buffer 8"
let g:WhichKeyDesc_buffer_9 = "<leader>b9 Go to buffer 9"

" Git operations
let g:WhichKeyDesc_git = "<leader>g +git"
let g:WhichKeyDesc_git_history = "<leader>gh File history"
let g:WhichKeyDesc_git_stage = "<leader>gs Stage/Git menu"
let g:WhichKeyDesc_git_unstage = "<leader>gu Rollback changes"
let g:WhichKeyDesc_git_stage_buffer = "<leader>gS Stage buffer"
let g:WhichKeyDesc_git_reset_buffer = "<leader>gU Reset buffer"
let g:WhichKeyDesc_git_preview = "<leader>gp Preview hunk"
let g:WhichKeyDesc_git_blame = "<leader>gb Blame line"
let g:WhichKeyDesc_git_blame_toggle = "<leader>gB Toggle blame"
let g:WhichKeyDesc_git_diff = "<leader>gd Diff this"
let g:WhichKeyDesc_git_diff_cached = "<leader>gD Diff cached"

" Project operations
let g:WhichKeyDesc_project = "<leader>p +project"
let g:WhichKeyDesc_project_alternate = "<leader>pa Alternate file"
let g:WhichKeyDesc_project_related = "<leader>pr Related file"
let g:WhichKeyDesc_project_model = "<leader>pm Model"
let g:WhichKeyDesc_project_view = "<leader>pv View"
let g:WhichKeyDesc_project_controller = "<leader>pc Controller"
let g:WhichKeyDesc_project_find = "<leader>pf Find references"
let g:WhichKeyDesc_project_open = "<leader>po Open in finder"
let g:WhichKeyDesc_project_test = "<leader>pt Run test"
let g:WhichKeyDesc_project_test_current = "<leader>pT Test current"
let g:WhichKeyDesc_project_spring = "<leader>pS Spring constructor"
let g:WhichKeyDesc_project_autowired = "<leader>pA Autowired dependency"
let g:WhichKeyDesc_project_endpoints = "<leader>pE Spring endpoints"
let g:WhichKeyDesc_project_beans = "<leader>pB Spring beans"
let g:WhichKeyDesc_project_preview = "<leader>pd Quick definition"
let g:WhichKeyDesc_project_preview_type = "<leader>pD Quick type definition"
let g:WhichKeyDesc_project_preview_docs = "<leader>ph Quick documentation"
let g:WhichKeyDesc_project_preview_impl = "<leader>pi Quick implementations"
let g:WhichKeyDesc_project_preview_error = "<leader>pe Show error"

" Run/Debug operations
let g:WhichKeyDesc_run = "<leader>r +run"
let g:WhichKeyDesc_run_run = "<leader>rr Run"
let g:WhichKeyDesc_run_class = "<leader>rc Run class"
let g:WhichKeyDesc_run_choose = "<leader>rf Choose configuration"
let g:WhichKeyDesc_run_test = "<leader>rt Run tests"
let g:WhichKeyDesc_run_rerun = "<leader>rR Rerun"
let g:WhichKeyDesc_run_rerun_tests = "<leader>rT Rerun tests"
let g:WhichKeyDesc_run_stop = "<leader>rs Stop"
let g:WhichKeyDesc_run_hotswap = "<leader>rh Hot swap"
let g:WhichKeyDesc_run_compile = "<leader>ra Compile dirty"
let g:WhichKeyDesc_run_dashboard = "<leader>rw Run dashboard"

let g:WhichKeyDesc_debug = "<leader>d +debug"
let g:WhichKeyDesc_debug_debug = "<leader>dd Debug"
let g:WhichKeyDesc_debug_class = "<leader>dc Debug class"
let g:WhichKeyDesc_debug_choose = "<leader>df Choose debug configuration"
let g:WhichKeyDesc_debug_test = "<leader>dt Debug tests"
let g:WhichKeyDesc_debug_breakpoint = "<leader>db Toggle breakpoint"
let g:WhichKeyDesc_debug_breakpoints = "<leader>dB View breakpoints"
let g:WhichKeyDesc_debug_edit_breakpoint = "<leader>de Edit breakpoint"
let g:WhichKeyDesc_debug_mute = "<leader>dm Mute breakpoints"
let g:WhichKeyDesc_debug_step_over = "<leader>do Step over"
let g:WhichKeyDesc_debug_step_into = "<leader>di Step into"
let g:WhichKeyDesc_debug_step_out = "<leader>dO Step out"
let g:WhichKeyDesc_debug_resume = "<leader>dr Resume"
let g:WhichKeyDesc_debug_evaluate = "<leader>dv Evaluate expression"
let g:WhichKeyDesc_debug_watch = "<leader>dw Add to watch"
let g:WhichKeyDesc_debug_cursor = "<leader>dx Run to cursor"
let g:WhichKeyDesc_debug_compare = "<leader>dc Compare versions"
let g:WhichKeyDesc_debug_compare_last = "<leader>dC Compare with last"
let g:WhichKeyDesc_debug_compare_selected = "<leader>dl Compare selected"
let g:WhichKeyDesc_debug_show_diff = "<leader>dw Show diff"

" Refactoring operations
let g:WhichKeyDesc_refactor = "<leader>R +refactor"
let g:WhichKeyDesc_refactor_rename = "<leader>Rr Rename"
let g:WhichKeyDesc_refactor_method = "<leader>Rm Extract method"
let g:WhichKeyDesc_refactor_variable = "<leader>Rv Extract variable"
let g:WhichKeyDesc_refactor_field = "<leader>Rf Extract field"
let g:WhichKeyDesc_refactor_constant = "<leader>Rc Extract constant"
let g:WhichKeyDesc_refactor_parameter = "<leader>Rp Extract parameter"
let g:WhichKeyDesc_refactor_inline = "<leader>Ri Inline"
let g:WhichKeyDesc_refactor_signature = "<leader>Rs Change signature"
let g:WhichKeyDesc_refactor_menu = "<leader>RR Refactoring menu"
let g:WhichKeyDesc_refactor_interface = "<leader>Re Extract interface"
let g:WhichKeyDesc_refactor_superclass = "<leader>RS Extract superclass"
let g:WhichKeyDesc_refactor_move = "<leader>Ro Move"
let g:WhichKeyDesc_refactor_copy = "<leader>RP Copy"
let g:WhichKeyDesc_refactor_delete = "<leader>Rd Safe delete"

" Code generation
let g:WhichKeyDesc_insert = "<leader>i +insert/generate"
let g:WhichKeyDesc_insert_generate = "<leader>ig Generate menu"
let g:WhichKeyDesc_insert_constructor = "<leader>ic Generate constructor"
let g:WhichKeyDesc_insert_getter = "<leader>ig Generate getter"
let g:WhichKeyDesc_insert_setter = "<leader>is Generate setter"
let g:WhichKeyDesc_insert_accessor = "<leader>ia Generate getter/setter"
let g:WhichKeyDesc_insert_equals = "<leader>ie Generate equals"
let g:WhichKeyDesc_insert_test = "<leader>it Generate test method"
let g:WhichKeyDesc_insert_test_class = "<leader>iT Create test"
let g:WhichKeyDesc_insert_override = "<leader>io Override methods"
let g:WhichKeyDesc_insert_implement = "<leader>ii Implement methods"
let g:WhichKeyDesc_insert_javadoc = "<leader>id Generate javadoc"
let g:WhichKeyDesc_insert_template = "<leader>it Insert live template"
let g:WhichKeyDesc_insert_surround = "<leader>is Surround with"
let g:WhichKeyDesc_insert_surround_template = "<leader>iw Surround with template"

" Database operations
let g:WhichKeyDesc_database = "<leader>D +database"
let g:WhichKeyDesc_database_open = "<leader>DD Database tool window"
let g:WhichKeyDesc_database_execute = "<leader>Dq Execute query"
let g:WhichKeyDesc_database_execute_alt = "<leader>De Execute query"
let g:WhichKeyDesc_database_schema = "<leader>Ds Choose schema"
let g:WhichKeyDesc_database_properties = "<leader>Dt Properties"
let g:WhichKeyDesc_database_run = "<leader>Dr Run query"
let g:WhichKeyDesc_database_format = "<leader>Df Format"
let g:WhichKeyDesc_database_commit = "<leader>Dc Commit transaction"
let g:WhichKeyDesc_database_rollback = "<leader>DR Rollback transaction"
let g:WhichKeyDesc_database_console = "<leader>Dn New console"

" Testing & Coverage
let g:WhichKeyDesc_test = "<leader>t +test"
let g:WhichKeyDesc_test_coverage = "<leader>tC Run with coverage"
let g:WhichKeyDesc_test_show_coverage = "<leader>tc Show coverage"
let g:WhichKeyDesc_test_rerun_failed = "<leader>tR Rerun failed tests"
let g:WhichKeyDesc_test_terminal = "<leader>tm Open terminal"

" Profiling
let g:WhichKeyDesc_profiler = "<leader>P +profiler"
let g:WhichKeyDesc_profiler_run = "<leader>Pp Run profiler"
let g:WhichKeyDesc_profiler_attach = "<leader>Pa Attach to process"
let g:WhichKeyDesc_profiler_stop = "<leader>Ps Stop profiler"
let g:WhichKeyDesc_profiler_snapshot = "<leader>Pr Open snapshot"
let g:WhichKeyDesc_profiler_memory = "<leader>PM Memory analysis"
let g:WhichKeyDesc_profiler_heap = "<leader>PH Heap dump"
let g:WhichKeyDesc_profiler_cpu = "<leader>PC CPU snapshot"

" Tool windows
let g:WhichKeyDesc_open = "<leader>o +open"
let g:WhichKeyDesc_open_terminal = "<leader>ot Terminal"
let g:WhichKeyDesc_open_project = "<leader>op Project"
let g:WhichKeyDesc_open_run = "<leader>or Run"
let g:WhichKeyDesc_open_debug = "<leader>od Debug"
let g:WhichKeyDesc_open_database = "<leader>oD Database"
let g:WhichKeyDesc_open_git = "<leader>og Git/Commit"
let g:WhichKeyDesc_open_vcs = "<leader>ov Version control"
let g:WhichKeyDesc_open_structure = "<leader>os Structure"
let g:WhichKeyDesc_open_problems = "<leader>oi Problems"
let g:WhichKeyDesc_open_favorites = "<leader>of Favorites"
let g:WhichKeyDesc_open_services = "<leader>oe Services"
let g:WhichKeyDesc_open_build = "<leader>ob Build"
let g:WhichKeyDesc_open_todo = "<leader>oT TODO"
let g:WhichKeyDesc_open_maven = "<leader>om Maven"
let g:WhichKeyDesc_open_gradle = "<leader>oG Gradle"
let g:WhichKeyDesc_open_hide_all = "<leader>ow Hide all windows"

" Code analysis
let g:WhichKeyDesc_analyze = "<leader>a +analyze/action"
let g:WhichKeyDesc_analyze_inspect = "<leader>ai Inspect code"
let g:WhichKeyDesc_analyze_actions = "<leader>aa Analysis actions"
let g:WhichKeyDesc_analyze_intentions = "<leader>ad Show intentions"
let g:WhichKeyDesc_analyze_error = "<leader>ae Show error"
let g:WhichKeyDesc_analyze_inspect_popup = "<leader>aq Inspect popup"
let g:WhichKeyDesc_analyze_optimize = "<leader>ao Optimize imports"
let g:WhichKeyDesc_analyze_cleanup = "<leader>ac Code cleanup"
let g:WhichKeyDesc_analyze_format = "<leader>af Reformat code"
let g:WhichKeyDesc_analyze_rearrange = "<leader>ar Rearrange code"
let g:WhichKeyDesc_analyze_silent = "<leader>as Silent cleanup"
let g:WhichKeyDesc_analyze_refactor_menu = "<leader>am Refactoring menu"
let g:WhichKeyDesc_analyze_git_menu = "<leader>ag Git menu"
let g:WhichKeyDesc_analyze_run = "<leader>ar Run anything"
let g:WhichKeyDesc_analyze_search = "<leader>aw Search everywhere"
let g:WhichKeyDesc_analyze_terminal = "<leader>at Terminal"

" Build operations
let g:WhichKeyDesc_build = "<leader>B +build"
let g:WhichKeyDesc_build_compile = "<leader>Bb Compile dirty"
let g:WhichKeyDesc_build_compile_all = "<leader>BB Compile all"
let g:WhichKeyDesc_build_project = "<leader>Br Build project"
let g:WhichKeyDesc_build_rebuild = "<leader>BR Rebuild project"
let g:WhichKeyDesc_build_clean = "<leader>Bc Clean"
let g:WhichKeyDesc_build_maven = "<leader>Bm Maven reimport"
let g:WhichKeyDesc_build_gradle = "<leader>Bg Gradle refresh"
let g:WhichKeyDesc_build_gradle_task = "<leader>Be Gradle task"

" Bookmarks
let g:WhichKeyDesc_mark = "<leader>m +marks/bookmarks"
let g:WhichKeyDesc_mark_toggle = "<leader>mm Toggle bookmark"
let g:WhichKeyDesc_mark_show = "<leader>ms Show bookmarks"
let g:WhichKeyDesc_mark_list = "<leader>ml List bookmarks"
let g:WhichKeyDesc_mark_1 = "<leader>m1 Toggle bookmark 1"
let g:WhichKeyDesc_mark_2 = "<leader>m2 Toggle bookmark 2"
let g:WhichKeyDesc_mark_3 = "<leader>m3 Toggle bookmark 3"
let g:WhichKeyDesc_mark_4 = "<leader>m4 Toggle bookmark 4"
let g:WhichKeyDesc_mark_5 = "<leader>m5 Toggle bookmark 5"
let g:WhichKeyDesc_mark_6 = "<leader>m6 Toggle bookmark 6"
let g:WhichKeyDesc_mark_7 = "<leader>m7 Toggle bookmark 7"
let g:WhichKeyDesc_mark_8 = "<leader>m8 Toggle bookmark 8"
let g:WhichKeyDesc_mark_9 = "<leader>m9 Toggle bookmark 9"
let g:WhichKeyDesc_mark_0 = "<leader>m0 Toggle bookmark 0"
let g:WhichKeyDesc_mark_all = "<leader>ma Select all occurrences"
let g:WhichKeyDesc_mark_next = "<leader>mn Select next occurrence"
let g:WhichKeyDesc_mark_unselect = "<leader>mu Unselect previous"
let g:WhichKeyDesc_mark_skip = "<leader>ms Skip occurrence"

" Quickfix/Location list
let g:WhichKeyDesc_quickfix = "<leader>x +quickfix"
let g:WhichKeyDesc_quickfix_open = "<leader>xo Open quickfix"
let g:WhichKeyDesc_quickfix_close = "<leader>xc Close quickfix"
let g:WhichKeyDesc_quickfix_clear = "<leader>xx Clear quickfix"
let g:WhichKeyDesc_quickfix_location = "<leader>xl Open location list"
let g:WhichKeyDesc_quickfix_location_close = "<leader>xL Close location list"

" Yank/Copy operations
let g:WhichKeyDesc_yank = "<leader>y +yank/copy"
let g:WhichKeyDesc_yank_file = "<leader>yf Copy relative path"
let g:WhichKeyDesc_yank_file_abs = "<leader>yF Copy absolute path"
let g:WhichKeyDesc_yank_reference = "<leader>yr Copy reference"
let g:WhichKeyDesc_yank_line = "<leader>yl Copy path with line"
let g:WhichKeyDesc_yank_element = "<leader>yc Copy element"

" Jump/Recent operations
let g:WhichKeyDesc_jump = "<leader>j +jump"
let g:WhichKeyDesc_jump_recent = "<leader>jr Recent locations"
let g:WhichKeyDesc_jump_changed = "<leader>je Recent changed files"
let g:WhichKeyDesc_jump_last = "<leader>jl Jump to last change"
let g:WhichKeyDesc_jump_next = "<leader>jn Jump to next change"
let g:WhichKeyDesc_jump_navbar = "<leader>jb Show navbar"

" Session/Project management
let g:WhichKeyDesc_session = "<leader>S +session"
let g:WhichKeyDesc_session_switch = "<leader>Ss Switch project"
let g:WhichKeyDesc_session_open = "<leader>So Open file/project"
let g:WhichKeyDesc_session_new = "<leader>Sn New project"
let g:WhichKeyDesc_session_close = "<leader>Sc Close project"
let g:WhichKeyDesc_session_recent = "<leader>Sr Recent projects"

" Structural search
let g:WhichKeyDesc_structural = "<leader>S +structural"
let g:WhichKeyDesc_structural_search = "<leader>SS Structural search"
let g:WhichKeyDesc_structural_replace = "<leader>Sr Structural replace"
let g:WhichKeyDesc_structural_find = "<leader>Sf Structural find"

" HTTP Client
let g:WhichKeyDesc_http = "<leader>H +http"
let g:WhichKeyDesc_http_execute = "<leader>He Execute request"
let g:WhichKeyDesc_http_all = "<leader>Hc Run all requests"
let g:WhichKeyDesc_http_new = "<leader>Hn New request"
let g:WhichKeyDesc_http_show = "<leader>Hs Show requests"

" String manipulation
let g:WhichKeyDesc_string = "<leader>sm +string"
let g:WhichKeyDesc_string_menu = "<leader>sm String manipulation menu"
let g:WhichKeyDesc_string_toggle = "<leader>st Toggle case"
let g:WhichKeyDesc_string_sort = "<leader>ss Sort"

" Zen mode
let g:WhichKeyDesc_zen = "<leader>z +zen"
let g:WhichKeyDesc_zen_distraction = "<leader>zz Distraction-free mode"
let g:WhichKeyDesc_zen_presentation = "<leader>zp Presentation mode"
let g:WhichKeyDesc_zen_fullscreen = "<leader>zf Fullscreen"

" Quick launchers (double leader)
let g:WhichKeyDesc_launcher = "<leader><leader> Quick launchers"
let g:WhichKeyDesc_launcher_file = "<leader><leader>f Find file"
let g:WhichKeyDesc_launcher_symbol = "<leader><leader>s Find symbol"
let g:WhichKeyDesc_launcher_action = "<leader><leader>a Find action"
let g:WhichKeyDesc_launcher_class = "<leader><leader>c Find class"
let g:WhichKeyDesc_launcher_grep = "<leader><leader>r Grep/Find in path"
let g:WhichKeyDesc_launcher_git = "<leader><leader>g Git menu"
let g:WhichKeyDesc_launcher_buffer = "<leader><leader>b Recent files"
let g:WhichKeyDesc_launcher_database = "<leader><leader>d Database"
let g:WhichKeyDesc_launcher_terminal = "<leader><leader>t Terminal"
let g:WhichKeyDesc_launcher_project = "<leader><leader>p Switch project"

" Window operations
let g:WhichKeyDesc_window = "<leader>h/v Window splits"
let g:WhichKeyDesc_window_hsplit = "<leader>hh Vertical split"
let g:WhichKeyDesc_window_vsplit = "<leader>vv Horizontal split"

" Misc
let g:WhichKeyDesc_vim = "<leader>v +vim"
let g:WhichKeyDesc_vim_reload = "<leader>vr Reload vimrc"
let g:WhichKeyDesc_notifications = "<leader>nc Close notifications"

" EasyMotion: Quick cursor jumps (requires AceJump plugin)
" Install: IdeaVim-EasyMotion + AceJump from Marketplace
Plug 'easymotion/vim-easymotion'
map <leader>j <Plug>(easymotion-s)
map <leader>J <Plug>(easymotion-f)
map <leader>jw <Plug>(easymotion-w)
map <leader>jb <Plug>(easymotion-b)

" Commentary: Toggle comments
Plug 'tpope/vim-commentary'

" Multiple cursors
Plug 'terryma/vim-multiple-cursors'

" Basic settings
set visualbell
set noerrorbells
set ideajoin
set idearefactormode=keep
set relativenumber number
set clipboard+=unnamedplus
set commentary
set surround

" NERDTree (IdeaVim plugin)
set NERDTree
nmap <leader>nn :NERDTreeToggle<CR>
nmap <leader>ns :NERDTreeFind<CR>
let g:NERDTRreeMapActivateNode = 'l'
let g:NERDTreeMAPJumpParent = 'h'

" ============================================================================
" Basic file operations
" ============================================================================
nmap <leader>w :w<CR>
nmap <leader>q <Action>(CloseContent)
nmap <leader>Q <Action>(Exit)
nmap ; :

" ============================================================================
" Window splits and navigation
" ============================================================================
nmap <leader>hh <Action>(SplitVertically)
nmap <leader>vv <Action>(SplitHorizontally)
nmap <C-h> <c-w>h
nmap <C-j> <c-w>j
nmap <C-k> <c-w>k
nmap <C-l> <c-w>l

" ============================================================================
" Search operations
" ============================================================================
" Search navigation (centered)
nmap n nzz
nmap N Nzz

" Search in file
nmap <leader>sf <Action>(Find)
nmap <leader>sr <Action>(Replace)
nmap <leader>sw <Action>(Replace)

" Visual mode search
vmap * y/<C-R>"<CR>
vmap # y?<C-R>"<CR>

" ============================================================================
" File finding and navigation (Telescope equivalents)
" ============================================================================
nmap <leader>fs <Action>(GotoFile)
nmap <leader>fr <Action>(RecentFiles)
nmap <leader>fR <Action>(RecentFiles)
nmap <leader>fg <Action>(Vcs.ShowTabbedFileHistory)
nmap <leader>fm <Action>(Vcs.ShowChangelistsAction)
nmap <leader>fw <Action>(FindInPath)
nmap <leader>fd <Action>(FindInPath)
nmap <leader>fD <Action>(FindInPath)
nmap <leader>fk <Action>(GotoAction)
nmap <leader>fb <Action>(RecentFiles)
nmap <leader>fh <Action>(HelpTopics)
nmap <leader>fn <Action>(SelectInProjectView)
nmap <leader>fp <Action>(SelectInProjectView)
nmap <leader>fo <Action>(RevealIn)
nmap <leader>fO <Action>(RevealIn)

" Copy file paths
nmap <leader>fy <Action>(CopyPaths)
nmap <leader>fY <Action>(CopyAbsolutePath)
nmap <leader>fc <Action>(CopyContentRootPath)
nmap <leader>fC <Action>(CopyContentRootPath)

" ============================================================================
" Buffer/Tab navigation
" ============================================================================
nmap <C-n> <Action>(NextTab)
nmap <C-p> <Action>(PreviousTab)
nmap <leader>ls <Action>(Switcher)
nmap <leader>b1 <Action>(GoToTab1)
nmap <leader>b2 <Action>(GoToTab2)
nmap <leader>b3 <Action>(GoToTab3)
nmap <leader>b4 <Action>(GoToTab4)
nmap <leader>b5 <Action>(GoToTab5)
nmap <leader>b6 <Action>(GoToTab6)
nmap <leader>b7 <Action>(GoToTab7)
nmap <leader>b8 <Action>(GoToTab8)
nmap <leader>b9 <Action>(GoToTab9)

" ============================================================================
" Edit file operations
" ============================================================================
nmap <leader>ee <Action>(GotoFile)
nmap <leader>eb <Action>(RecentFiles)

" ============================================================================
" Insert mode mappings
" ============================================================================
imap <C-e> <Esc>A
imap <C-l> <Right>

" ============================================================================
" Tag navigation (IntelliJ navigation)
" ============================================================================
nmap <leader>td <Action>(GotoDeclaration)
nmap <leader>tu <Action>(FindUsages)
nmap <leader>ta <Action>(GotoDeclaration)
nmap <leader>tg <Action>(GotoSymbol)
nmap <leader>ts <Action>(JumpToLastChange)

" ============================================================================
" LSP/IntelliJ navigation and code actions
" ============================================================================
nmap <leader>ld <Action>(GotoDeclaration)
nmap <leader>lD <Action>(GotoTypeDeclaration)
nmap <leader>li <Action>(GotoImplementation)
nmap <leader>lt <Action>(GotoTypeDeclaration)
nmap <leader>lr <Action>(FindUsages)
nmap <leader>lh <Action>(QuickJavaDoc)
nmap <leader>ls <Action>(ParameterInfo)
nmap <leader>la <Action>(ShowIntentionActions)
nmap <leader>ln <Action>(RenameElement)
nmap <leader>le <Action>(ShowErrorDescription)
nmap <leader>lq <Action>(ActivateProblemsViewToolWindow)
nmap [d <Action>(GotoPreviousError)
nmap ]d <Action>(GotoNextError)
nmap <leader>lo <Action>(FileStructurePopup)
nmap <leader>lO <Action>(GotoSymbol)
nmap <leader>lR <Action>(RestartIde)
nmap <leader>lI <Action>(ShowProjectStructureSettings)

" ============================================================================
" Project/Framework operations
" ============================================================================
nmap <leader>pa <Action>(GotoRelated)
nmap <leader>pr <Action>(GotoRelated)
nmap <leader>pm <Action>(GotoRelated)
nmap <leader>pv <Action>(GotoRelated)
nmap <leader>pc <Action>(GotoRelated)
nmap <leader>pf <Action>(FindUsages)
nmap <leader>po <Action>(RevealIn)
nmap <leader>pt <Action>(RunClass)
nmap <leader>pT <Action>(RunClass)

" ============================================================================
" Git operations (gitsigns equivalents)
" ============================================================================
nmap <leader>gh <Action>(Vcs.ShowTabbedFileHistory)
nmap <leader>gs <Action>(Vcs.QuickListPopupAction)
nmap <leader>gu <Action>(Vcs.RollbackChangedLines)
nmap <leader>gS <Action>(ChangesView.AddUnversioned)
nmap <leader>gU <Action>(ChangesView.Revert)
nmap <leader>gp <Action>(Compare.SameVersion)
nmap <leader>gb <Action>(Annotate)
nmap <leader>gB <Action>(Annotate)
nmap <leader>gd <Action>(Compare.SameVersion)
nmap <leader>gD <Action>(Compare.LastVersion)
nmap ]c <Action>(VcsShowNextChangeMarker)
nmap [c <Action>(VcsShowPrevChangeMarker)

" ============================================================================
" Quickfix/Location list (IntelliJ Problems/TODO)
" ============================================================================
nmap ]q <Action>(GotoNextError)
nmap [q <Action>(GotoPreviousError)
nmap <leader>xo <Action>(ActivateProblemsViewToolWindow)
nmap <leader>xc <Action>(HideActiveWindow)
nmap <leader>xx <Action>(ActivateProblemsViewToolWindow)
nmap ]l <Action>(GotoNextError)
nmap [l <Action>(GotoPreviousError)
nmap <leader>xl <Action>(ActivateProblemsViewToolWindow)
nmap <leader>xL <Action>(HideActiveWindow)

" ============================================================================
" Terminal
" ============================================================================
nmap <leader>tm <Action>(ActivateTerminalToolWindow)

" ============================================================================
" Run/Debug Operations
" ============================================================================
" <leader>r* - Run operations
" <leader>d* - Debug operations
nmap <leader>rr <Action>(Run)
nmap <leader>rc <Action>(RunClass)
nmap <leader>rf <Action>(ChooseRunConfiguration)
nmap <leader>rt <Action>(RunTests)
nmap <leader>rT <Action>(RerunTests)
nmap <leader>rs <Action>(Stop)
nmap <leader>rR <Action>(Rerun)

nmap <leader>dd <Action>(Debug)
nmap <leader>dc <Action>(DebugClass)
nmap <leader>df <Action>(ChooseDebugConfiguration)
nmap <leader>dt <Action>(DebugTests)
nmap <leader>db <Action>(ToggleLineBreakpoint)
nmap <leader>dB <Action>(ViewBreakpoints)
nmap <leader>de <Action>(EditBreakpoint)
nmap <leader>dm <Action>(XDebugger.MuteBreakpoints)

" Debug stepping
nmap <leader>do <Action>(StepOver)
nmap <leader>di <Action>(StepInto)
nmap <leader>dO <Action>(StepOut)
nmap <leader>dr <Action>(Resume)
nmap <leader>dv <Action>(EvaluateExpression)
nmap <leader>dw <Action>(Debugger.AddToWatch)
nmap <leader>dx <Action>(RunToCursor)

" ============================================================================
" Refactoring Operations
" ============================================================================
" <leader>R* - Refactor operations (capital R to avoid conflict with run)
nmap <leader>Rr <Action>(RenameElement)
nmap <leader>Rm <Action>(ExtractMethod)
nmap <leader>Rv <Action>(IntroduceVariable)
nmap <leader>Rf <Action>(IntroduceField)
nmap <leader>Rc <Action>(IntroduceConstant)
nmap <leader>Rp <Action>(IntroduceParameter)
nmap <leader>Ri <Action>(Inline)
nmap <leader>Rs <Action>(ChangeSignature)
nmap <leader>RR <Action>(Refactorings.QuickListPopupAction)
nmap <leader>Re <Action>(ExtractInterface)
nmap <leader>RS <Action>(ExtractSuperclass)
nmap <leader>Ro <Action>(Move)
nmap <leader>RP <Action>(CopyElement)
nmap <leader>Rd <Action>(SafeDelete)

" ============================================================================
" Code Generation
" ============================================================================
" <leader>i* - Insert/Generate code
nmap <leader>ig <Action>(Generate)
nmap <leader>ic <Action>(GenerateConstructor)
nmap <leader>ig <Action>(GenerateGetter)
nmap <leader>is <Action>(GenerateSetter)
nmap <leader>ia <Action>(GenerateGetterAndSetter)
nmap <leader>ie <Action>(GenerateEquals)
nmap <leader>it <Action>(GenerateTestMethod)
nmap <leader>iT <Action>(CreateTest)
nmap <leader>io <Action>(OverrideMethods)
nmap <leader>ii <Action>(ImplementMethods)
nmap <leader>id <Action>(JavaGenerateJavadoc)

" ============================================================================
" Database Tools
" ============================================================================
" <leader>D* - Database operations (capital D)
nmap <leader>DD <Action>(ActivateDatabaseToolWindow)
nmap <leader>Dq <Action>(Console.Jdbc.Execute)
nmap <leader>De <Action>(Console.Jdbc.Execute)
nmap <leader>Ds <Action>(Console.Jdbc.ChooseSchema)
nmap <leader>Dt <Action>(DatabaseView.PropertiesAction)
nmap <leader>Dr <Action>(Console.Jdbc.RunQueryInConsole)
nmap <leader>Df <Action>(ReformatCode)
nmap <leader>Dc <Action>(Console.Transaction.Commit)
nmap <leader>DR <Action>(Console.Transaction.Rollback)
nmap <leader>Dn <Action>(Console.Jdbc.NewConsole)

" ============================================================================
" Testing & Coverage
" ============================================================================
" Test with coverage
nmap <leader>tC <Action>(RunCoverage)
nmap <leader>tc <Action>(Coverage)
nmap <leader>tR <Action>(RerunFailedTests)

" ============================================================================
" Profiling & Performance
" ============================================================================
" <leader>P* - Profiler operations (capital P)
nmap <leader>Pp <Action>(Profiler.RunProfiler)
nmap <leader>Pa <Action>(Profiler.AttachToProcess)
nmap <leader>Ps <Action>(Profiler.StopProfiler)
nmap <leader>Pr <Action>(Profiler.OpenSnapshot)
nmap <leader>PM <Action>(Memory.CalculateRetainedSize)
nmap <leader>PH <Action>(Profiler.ShowHeapDump)
nmap <leader>PC <Action>(Profiler.ShowCPUSnapshot)

" ============================================================================
" Tool Windows
" ============================================================================
" <leader>o* - Open tool windows
nmap <leader>ot <Action>(ActivateTerminalToolWindow)
nmap <leader>op <Action>(ActivateProjectToolWindow)
nmap <leader>or <Action>(ActivateRunToolWindow)
nmap <leader>od <Action>(ActivateDebugToolWindow)
nmap <leader>oD <Action>(ActivateDatabaseToolWindow)
nmap <leader>og <Action>(ActivateCommitToolWindow)
nmap <leader>ov <Action>(ActivateVersionControlToolWindow)
nmap <leader>os <Action>(ActivateStructureToolWindow)
nmap <leader>oi <Action>(ActivateProblemsViewToolWindow)
nmap <leader>of <Action>(ActivateFavoritesToolWindow)
nmap <leader>oe <Action>(ActivateServicesToolWindow)
nmap <leader>ob <Action>(ActivateBuildToolWindow)
nmap <leader>oT <Action>(ActivateTODOToolWindow)
nmap <leader>om <Action>(ActivateMavenToolWindow)
nmap <leader>oG <Action>(ActivateGradleToolWindow)
nmap <leader>ow <Action>(HideAllWindows)

" ============================================================================
" Code Analysis & Inspection
" ============================================================================
" <leader>a* - Analysis operations
nmap <leader>ai <Action>(InspectCode)
nmap <leader>aa <Action>(AnalyzeActions)
nmap <leader>ad <Action>(ShowIntentionActions)
nmap <leader>ae <Action>(ShowErrorDescription)
nmap <leader>aq <Action>(InspectCodeActionInPopupMenu)
nmap <leader>ao <Action>(OptimizeImports)
nmap <leader>ac <Action>(CodeCleanup)
nmap <leader>af <Action>(ReformatCode)
nmap <leader>ar <Action>(RearrangeCode)
nmap <leader>as <Action>(SilentCodeCleanup)

" ============================================================================
" Build & Gradle/Maven
" ============================================================================
" <leader>B* - Build operations (capital B)
nmap <leader>Bb <Action>(CompileDirty)
nmap <leader>BB <Action>(Compile)
nmap <leader>Br <Action>(BuildProject)
nmap <leader>BR <Action>(RebuildProject)
nmap <leader>Bc <Action>(CleanProject)
nmap <leader>Bm <Action>(Maven.Reimport)
nmap <leader>Bg <Action>(Gradle.RefreshDependencies)
nmap <leader>Be <Action>(Gradle.ExecuteTask)

" ============================================================================
" Bookmarks & Marks
" ============================================================================
" <leader>m* - Marks/bookmarks
nmap <leader>mm <Action>(ToggleBookmark)
nmap <leader>ms <Action>(ShowBookmarks)
nmap <leader>ml <Action>(ShowBookmarks)
nmap <leader>m1 <Action>(ToggleBookmark1)
nmap <leader>m2 <Action>(ToggleBookmark2)
nmap <leader>m3 <Action>(ToggleBookmark3)
nmap <leader>m4 <Action>(ToggleBookmark4)
nmap <leader>m5 <Action>(ToggleBookmark5)
nmap <leader>m6 <Action>(ToggleBookmark6)
nmap <leader>m7 <Action>(ToggleBookmark7)
nmap <leader>m8 <Action>(ToggleBookmark8)
nmap <leader>m9 <Action>(ToggleBookmark9)
nmap <leader>m0 <Action>(ToggleBookmark0)
nmap ]m <Action>(GotoNextBookmark)
nmap [m <Action>(GotoPreviousBookmark)

" ============================================================================
" Multi-cursor & Selection
" ============================================================================
nmap <leader>ma <Action>(SelectAllOccurrences)
nmap <leader>mn <Action>(SelectNextOccurrence)
nmap <leader>mu <Action>(UnselectPreviousOccurrence)
nmap <leader>ms <Action>(SkipOccurrence)

" ============================================================================
" Code Folding
" ============================================================================
nmap zc <Action>(CollapseRegion)
nmap zo <Action>(ExpandRegion)
nmap zC <Action>(CollapseAllRegions)
nmap zO <Action>(ExpandAllRegions)
nmap zr <Action>(ExpandRegionRecursively)
nmap zm <Action>(CollapseRegionRecursively)

" ============================================================================
" Recent Locations & Navigation History
" ============================================================================
nmap <leader>hl <Action>(RecentLocations)
nmap <leader>hc <Action>(RecentChangedFiles)
nmap gb <Action>(Back)
nmap gf <Action>(Forward)
nmap <leader>ju <Action>(JumpToLastChange)
nmap <leader>jn <Action>(JumpToNextChange)

" ============================================================================
" Quick Launchers (like tmux M-* bindings)
" ============================================================================
" Double-leader for instant fuzzy finding (no preview, just launch)
nmap <leader><leader>f <Action>(GotoFile)
nmap <leader><leader>s <Action>(GotoSymbol)
nmap <leader><leader>a <Action>(GotoAction)
nmap <leader><leader>c <Action>(GotoClass)
nmap <leader><leader>r <Action>(FindInPath)
nmap <leader><leader>g <Action>(Vcs.QuickListPopupAction)
nmap <leader><leader>b <Action>(RecentFiles)
nmap <leader><leader>d <Action>(ActivateDatabaseToolWindow)
nmap <leader><leader>t <Action>(ActivateTerminalToolWindow)
nmap <leader><leader>p <Action>(ManageRecentProjects)

" ============================================================================
" Preview Actions (like fzf --preview)
" ============================================================================
" Quick peek without changing focus
nmap <leader>pd <Action>(QuickDefinition)
nmap <leader>pD <Action>(QuickTypeDefinition)
nmap <leader>ph <Action>(QuickJavaDoc)
nmap <leader>pi <Action>(QuickImplementations)
nmap <leader>pe <Action>(ShowErrorDescription)

" ============================================================================
" Yank/Copy Operations (like your yank git hashes)
" ============================================================================
nmap <leader>yf <Action>(CopyPaths)
nmap <leader>yF <Action>(CopyAbsolutePath)
nmap <leader>yr <Action>(CopyReference)
nmap <leader>yl <Action>(CopyContentRootPath)
nmap <leader>yc <Action>(CopyElement)

" ============================================================================
" Recent/Jump Operations (like your git history navigation)
" ============================================================================
nmap <leader>jr <Action>(RecentLocations)
nmap <leader>je <Action>(RecentChangedFiles)
nmap <leader>jl <Action>(JumpToLastChange)
nmap <leader>jn <Action>(JumpToNextChange)
nmap <leader>jb <Action>(ShowNavBar)

" ============================================================================
" Scratchpad/Temp Files (like tmux temp windows)
" ============================================================================
nmap <leader>sn <Action>(NewScratchFile)
nmap <leader>sb <Action>(Scratches.ShowRecentScratchFiles)
nmap <leader>sc <Action>(Scratches.NewConsole)

" ============================================================================
" Context Action Menus (like your git commit action menu)
" ============================================================================
nmap <leader>am <Action>(Refactorings.QuickListPopupAction)
nmap <leader>ag <Action>(Vcs.QuickListPopupAction)
nmap <leader>ar <Action>(RunAnything)
nmap <leader>aw <Action>(SearchEverywhere)
nmap <leader>at <Action>(ActivateTerminalToolWindow)

" ============================================================================
" Structural Search & Advanced Find
" ============================================================================
nmap <leader>SS <Action>(StructuralSearchActions)
nmap <leader>Sr <Action>(StructuralSearchPlugin.StructuralReplaceAction)
nmap <leader>Sf <Action>(StructuralSearchPlugin.StructuralSearchAction)

" ============================================================================
" Live Templates & Code Generation (like your new-file templates)
" ============================================================================
nmap <leader>it <Action>(InsertLiveTemplate)
nmap <leader>is <Action>(SurroundWith)
nmap <leader>iw <Action>(SurroundWithLiveTemplate)

" ============================================================================
" Session/Project Management (like tmux-sessionizer)
" ============================================================================
nmap <leader>Ss <Action>(ManageRecentProjects)
nmap <leader>So <Action>(OpenFile)
nmap <leader>Sn <Action>(NewProject)
nmap <leader>Sc <Action>(CloseProject)
nmap <leader>Sr <Action>(ReopenRecentProjects)

" ============================================================================
" Fast Feedback Loop (continuous build/test like gww)
" ============================================================================
nmap <leader>rh <Action>(HotSwapAction)
nmap <leader>ra <Action>(CompileDirty)
nmap <leader>rw <Action>(RunDashboard.ShowConfigurations)

" ============================================================================
" Text Objects & Selection (multi-cursor like patterns)
" ============================================================================
nmap <leader>ma <Action>(SelectAllOccurrences)
nmap <leader>mn <Action>(SelectNextOccurrence)
nmap <leader>mu <Action>(UnselectPreviousOccurrence)
nmap <leader>ms <Action>(SkipOccurrence)

" ============================================================================
" Spring/Framework Specific (context-aware like your <leader>p*)
" ============================================================================
" These only work in Spring projects
nmap <leader>pS <Action>(Spring.Beans.Generate.Constructor)
nmap <leader>pA <Action>(Spring.Beans.Generate.Autowired.Dependency)
nmap <leader>pE <Action>(Spring.Endpoints)
nmap <leader>pB <Action>(Spring.Beans)

" ============================================================================
" Method/Parameter Info (quick peek)
" ============================================================================
nmap K <Action>(QuickJavaDoc)
nmap <leader>K <Action>(ParameterInfo)

" ============================================================================
" Compare/Diff Operations (like your git diff workflows)
" ============================================================================
nmap <leader>dc <Action>(Compare.SameVersion)
nmap <leader>dC <Action>(Compare.LastVersion)
nmap <leader>dl <Action>(Compare.Selected)
nmap <leader>dw <Action>(Diff.ShowDiff)

" ============================================================================
" HTTP Client (for testing APIs)
" ============================================================================
nmap <leader>He <Action>(RestClient.RunRequest)
nmap <leader>Hc <Action>(RestClient.RunAllRequestsInFile)
nmap <leader>Hn <Action>(RestClient.NewRequest)
nmap <leader>Hs <Action>(ShowHttpRequests)

" ============================================================================
" String Manipulation Plugin (if installed)
" ============================================================================
" Toggle case, sort, align, etc.
nmap <leader>sm <Action>(StringManipulation.PopupChoiceAction)
nmap <leader>st <Action>(osmedile.intellij.stringmanip.ToggleCaseAction)
nmap <leader>ss <Action>(osmedile.intellij.stringmanip.SortAction)

" ============================================================================
" Zen/Distraction Free Mode
" ============================================================================
nmap <leader>zz <Action>(ToggleDistractionFreeMode)
nmap <leader>zp <Action>(TogglePresentationMode)
nmap <leader>zf <Action>(ToggleFullScreen)

" ============================================================================
" Misc utility mappings
" ============================================================================
nmap <leader>rc :g/^\s*#/d<CR>
nnoremap <leader>i bi
nmap <leader>re <Action>(GotoRelated)
nmap <leader>sl <Action>(FindUsages)
vmap <leader>sl y:action FindInPath<CR>
nmap <leader>sp <Action>(ShowIntentionActions)

" Close all notifications
nmap <leader>nc <Action>(CloseAllNotifications)

" Reload ideavimrc
nmap <leader>vr :source ~/.ideavimrc<CR>
